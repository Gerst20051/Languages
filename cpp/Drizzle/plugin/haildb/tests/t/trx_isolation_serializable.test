connect (a,localhost,root,,);
connect (b,localhost,root,,);

connection a;
CREATE TABLE t1 (a int);
SET SESSION TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN;
INSERT INTO t1 values (1);

connection b;
SET SESSION TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN;
SELECT * from t1;

connection a;
INSERT INTO t1 values (2);

connection b;
SELECT * from t1;
COMMIT;
BEGIN;
SELECT * FROM t1;

connection a;
COMMIT;

connection b;
SELECT * from t1;
COMMIT;
BEGIN;
SELECT * from t1 order by a;

COMMIT;
DROP TABLE t1;

disconnect a;
disconnect b;
connection default;
