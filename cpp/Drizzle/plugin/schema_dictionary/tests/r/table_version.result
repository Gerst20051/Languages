CREATE TABLE version_test (a int);
SELECT TABLE_VERSION FROM DATA_DICTIONARY.TABLES WHERE TABLE_NAME="version_test";
TABLE_VERSION
1
SELECT TABLE_UUID INTO @current_table_uuid FROM DATA_DICTIONARY.TABLES WHERE TABLE_NAME="version_test";
ALTER TABLE version_test ADD COLUMN b int;
SELECT TABLE_VERSION FROM DATA_DICTIONARY.TABLES WHERE TABLE_NAME="version_test";
TABLE_VERSION
2
SELECT COUNT(*) FROM DATA_DICTIONARY.TABLES WHERE TABLE_UUID = @current_table_uuid;
COUNT(*)
1
ALTER TABLE version_test ADD COLUMN c int;
SELECT TABLE_VERSION FROM DATA_DICTIONARY.TABLES WHERE TABLE_NAME="version_test";
TABLE_VERSION
3
SELECT COUNT(*) FROM DATA_DICTIONARY.TABLES WHERE TABLE_UUID = @current_table_uuid;
COUNT(*)
1
DROP TABLE VERSION_test;
SELECT TABLE_VERSION FROM DATA_DICTIONARY.TABLES WHERE TABLE_NAME="version_test";
TABLE_VERSION
CREATE TABLE version_test (a int);
SELECT TABLE_VERSION FROM DATA_DICTIONARY.TABLES WHERE TABLE_NAME="version_test";
TABLE_VERSION
1
SELECT COUNT(*) FROM DATA_DICTIONARY.TABLES WHERE TABLE_UUID = @current_schema_uuid;
COUNT(*)
0
DROP TABLE VERSION_test;
