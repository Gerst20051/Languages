DROP TABLE IF EXISTS t1, t2;
CREATE TABLE t1 (
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
, padding VARCHAR(200) NOT NULL
) ENGINE=InnoDB;
INSERT INTO t1 VALUES (1, "I love testing.");
INSERT INTO t1 VALUES (2, "I hate testing.");
REPLACE INTO t1 VALUE (2, "I love testing.");
DROP TABLE t1;
CREATE TABLE t1 (
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
, padding VARCHAR(200) NOT NULL
) ENGINE=InnoDB;
CREATE TABLE t2 (
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
, fk_id INT NOT NULL
, CONSTRAINT fk_t1 FOREIGN KEY (fk_id) REFERENCES t1 (id) ON DELETE CASCADE
) ENGINE=InnoDB;
INSERT INTO t1 VALUES (1, "I love testing.");
INSERT INTO t1 VALUES (2, "I hate testing.");
REPLACE INTO t1 VALUE (2, "I love testing.");
DROP TABLE t2, t1;
create table t1 (a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b char(1), c INT, d INT, unique key(b), unique key(c));
insert into t1 values (1,"a",1,1),(2,"b",2,2),(3,"c",3,3);
replace into t1 values (1,"b",3,4);
select * from t1 order by a;
a	b	c	d
1	b	3	4
drop table t1;
create table t1 (a CHAR(5) NOT NULL PRIMARY KEY, b char(1), c INT, d INT, unique key(b), unique key(c));
insert into t1 values ("a","a",1,1),("bb","b",2,2),("ccc","c",3,3);
replace into t1 values ("a","b",3,4);
select * from t1 order by a;
a	b	c	d
a	b	3	4
drop table t1;
create table t1 (a DATE NOT NULL PRIMARY KEY, b char(1), c INT, d INT, unique key(b), unique key(c));
insert into t1 values ("2010-01-01","a",1,1),("2010-02-02","b",2,2),("2010-03-03","c",3,3);
replace into t1 values ("2010-01-01","b",3,4);
select * from t1 order by a;
a	b	c	d
2010-01-01	b	3	4
drop table t1;
create table t1 (a DOUBLE NOT NULL PRIMARY KEY, b char(1), c INT, d INT, unique key(b), unique key(c));
insert into t1 values (1.1,"a",1,1),(22.22,"b",2,2),(333.333,"c",3,3);
replace into t1 values (1.1,"b",3,4);
select * from t1 order by a;
a	b	c	d
1.1	b	3	4
drop table t1;
create table t1 (a FLOAT NOT NULL PRIMARY KEY, b char(1), c INT, d INT, unique key(b), unique key(c));
insert into t1 values (1.1,"a",1,1),(22.22,"b",2,2),(333.333,"c",3,3);
replace into t1 values (1.1,"b",3,4);
select * from t1 order by a;
a	b	c	d
1.1	b	3	4
drop table t1;
create table t1 (a ENUM("a","bb","ccc") NOT NULL PRIMARY KEY, b char(1), c INT, d INT, unique key(b), unique key(c));
insert into t1 values ("a","a",1,1),("bb","b",2,2),("ccc","c",3,3);
replace into t1 values ("a","b",3,4);
select * from t1 order by a;
a	b	c	d
a	b	3	4
drop table t1;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `id` INT NOT NULL AUTO_INCREMENT,   `padding` VARCHAR(200) COLLATE utf8_general_ci NOT NULL,   PRIMARY KEY (`id`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`id`,`padding`) VALUES (1,'I love testing.');
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`id`,`padding`) VALUES (2,'I hate testing.');
COMMIT;
START TRANSACTION;
UPDATE `test`.`t1` SET `padding`='I love testing.' WHERE `id`=2;
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `id` INT NOT NULL AUTO_INCREMENT,   `padding` VARCHAR(200) COLLATE utf8_general_ci NOT NULL,   PRIMARY KEY (`id`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t2` (   `id` INT NOT NULL AUTO_INCREMENT,   `fk_id` INT NOT NULL,   PRIMARY KEY (`id`),   KEY `fk_t1` (`fk_id`),   CONSTRAINT `fk_t1` FOREIGN KEY (`fk_id`) REFERENCES `t1` (`id`) ON DELETE CASCADE ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`id`,`padding`) VALUES (1,'I love testing.');
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`id`,`padding`) VALUES (2,'I hate testing.');
COMMIT;
START TRANSACTION;
DELETE FROM `test`.`t1` WHERE `id`=2;
INSERT INTO `test`.`t1` (`id`,`padding`) VALUES (2,'I love testing.');
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t2`;
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `a` INT NOT NULL AUTO_INCREMENT,   `b` VARCHAR(1) COLLATE utf8_general_ci DEFAULT NULL,   `c` INT DEFAULT NULL,   `d` INT DEFAULT NULL,   PRIMARY KEY (`a`),   UNIQUE KEY `b` (`b`),   UNIQUE KEY `c` (`c`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (1,'a',1,1);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (2,'b',2,2);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (3,'c',3,3);
COMMIT;
START TRANSACTION;
DELETE FROM `test`.`t1` WHERE `a`=1;
DELETE FROM `test`.`t1` WHERE `a`=2;
UPDATE `test`.`t1` SET `a`=1,`b`='b',`d`=4 WHERE `a`=3;
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `a` VARCHAR(5) COLLATE utf8_general_ci NOT NULL,   `b` VARCHAR(1) COLLATE utf8_general_ci DEFAULT NULL,   `c` INT DEFAULT NULL,   `d` INT DEFAULT NULL,   PRIMARY KEY (`a`),   UNIQUE KEY `b` (`b`),   UNIQUE KEY `c` (`c`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('a','a',1,1);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('bb','b',2,2);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('ccc','c',3,3);
COMMIT;
START TRANSACTION;
DELETE FROM `test`.`t1` WHERE `a`='a';
DELETE FROM `test`.`t1` WHERE `a`='bb';
UPDATE `test`.`t1` SET `a`='a',`b`='b',`d`=4 WHERE `a`='ccc';
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `a` DATE NOT NULL,   `b` VARCHAR(1) COLLATE utf8_general_ci DEFAULT NULL,   `c` INT DEFAULT NULL,   `d` INT DEFAULT NULL,   PRIMARY KEY (`a`),   UNIQUE KEY `b` (`b`),   UNIQUE KEY `c` (`c`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('2010-01-01','a',1,1);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('2010-02-02','b',2,2);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('2010-03-03','c',3,3);
COMMIT;
START TRANSACTION;
DELETE FROM `test`.`t1` WHERE `a`='2010-01-01';
DELETE FROM `test`.`t1` WHERE `a`='2010-02-02';
UPDATE `test`.`t1` SET `a`='2010-01-01',`b`='b',`d`=4 WHERE `a`='2010-03-03';
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `a` DOUBLE NOT NULL,   `b` VARCHAR(1) COLLATE utf8_general_ci DEFAULT NULL,   `c` INT DEFAULT NULL,   `d` INT DEFAULT NULL,   PRIMARY KEY (`a`),   UNIQUE KEY `b` (`b`),   UNIQUE KEY `c` (`c`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (1.1,'a',1,1);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (22.22,'b',2,2);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (333.333,'c',3,3);
COMMIT;
START TRANSACTION;
DELETE FROM `test`.`t1` WHERE `a`=1.1;
DELETE FROM `test`.`t1` WHERE `a`=22.22;
UPDATE `test`.`t1` SET `a`=1.1,`b`='b',`d`=4 WHERE `a`=333.333;
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `a` DOUBLE NOT NULL,   `b` VARCHAR(1) COLLATE utf8_general_ci DEFAULT NULL,   `c` INT DEFAULT NULL,   `d` INT DEFAULT NULL,   PRIMARY KEY (`a`),   UNIQUE KEY `b` (`b`),   UNIQUE KEY `c` (`c`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (1.1,'a',1,1);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (22.22,'b',2,2);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (333.333,'c',3,3);
COMMIT;
START TRANSACTION;
DELETE FROM `test`.`t1` WHERE `a`=1.1;
DELETE FROM `test`.`t1` WHERE `a`=22.22;
UPDATE `test`.`t1` SET `a`=1.1,`b`='b',`d`=4 WHERE `a`=333.333;
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `a` ENUM('a','bb','ccc') NOT NULL,   `b` VARCHAR(1) COLLATE utf8_general_ci DEFAULT NULL,   `c` INT DEFAULT NULL,   `d` INT DEFAULT NULL,   PRIMARY KEY (`a`),   UNIQUE KEY `b` (`b`),   UNIQUE KEY `c` (`c`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('a','a',1,1);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('bb','b',2,2);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('ccc','c',3,3);
COMMIT;
START TRANSACTION;
DELETE FROM `test`.`t1` WHERE `a`='a';
DELETE FROM `test`.`t1` WHERE `a`='bb';
UPDATE `test`.`t1` SET `a`='a',`b`='b',`d`=4 WHERE `a`='ccc';
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;

Generating statements for innodb replication log
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `id` INT NOT NULL AUTO_INCREMENT,   `padding` VARCHAR(200) COLLATE utf8_general_ci NOT NULL,   PRIMARY KEY (`id`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`id`,`padding`) VALUES (1,'I love testing.');
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`id`,`padding`) VALUES (2,'I hate testing.');
COMMIT;
START TRANSACTION;
UPDATE `test`.`t1` SET `padding`='I love testing.' WHERE `id`=2;
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `id` INT NOT NULL AUTO_INCREMENT,   `padding` VARCHAR(200) COLLATE utf8_general_ci NOT NULL,   PRIMARY KEY (`id`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t2` (   `id` INT NOT NULL AUTO_INCREMENT,   `fk_id` INT NOT NULL,   PRIMARY KEY (`id`),   KEY `fk_t1` (`fk_id`),   CONSTRAINT `fk_t1` FOREIGN KEY (`fk_id`) REFERENCES `t1` (`id`) ON DELETE CASCADE ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`id`,`padding`) VALUES (1,'I love testing.');
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`id`,`padding`) VALUES (2,'I hate testing.');
COMMIT;
START TRANSACTION;
DELETE FROM `test`.`t1` WHERE `id`=2;
INSERT INTO `test`.`t1` (`id`,`padding`) VALUES (2,'I love testing.');
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t2`;
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `a` INT NOT NULL AUTO_INCREMENT,   `b` VARCHAR(1) COLLATE utf8_general_ci DEFAULT NULL,   `c` INT DEFAULT NULL,   `d` INT DEFAULT NULL,   PRIMARY KEY (`a`),   UNIQUE KEY `b` (`b`),   UNIQUE KEY `c` (`c`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (1,'a',1,1);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (2,'b',2,2);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (3,'c',3,3);
COMMIT;
START TRANSACTION;
DELETE FROM `test`.`t1` WHERE `a`=1;
DELETE FROM `test`.`t1` WHERE `a`=2;
UPDATE `test`.`t1` SET `a`=1,`b`='b',`d`=4 WHERE `a`=3;
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `a` VARCHAR(5) COLLATE utf8_general_ci NOT NULL,   `b` VARCHAR(1) COLLATE utf8_general_ci DEFAULT NULL,   `c` INT DEFAULT NULL,   `d` INT DEFAULT NULL,   PRIMARY KEY (`a`),   UNIQUE KEY `b` (`b`),   UNIQUE KEY `c` (`c`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('a','a',1,1);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('bb','b',2,2);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('ccc','c',3,3);
COMMIT;
START TRANSACTION;
DELETE FROM `test`.`t1` WHERE `a`='a';
DELETE FROM `test`.`t1` WHERE `a`='bb';
UPDATE `test`.`t1` SET `a`='a',`b`='b',`d`=4 WHERE `a`='ccc';
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `a` DATE NOT NULL,   `b` VARCHAR(1) COLLATE utf8_general_ci DEFAULT NULL,   `c` INT DEFAULT NULL,   `d` INT DEFAULT NULL,   PRIMARY KEY (`a`),   UNIQUE KEY `b` (`b`),   UNIQUE KEY `c` (`c`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('2010-01-01','a',1,1);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('2010-02-02','b',2,2);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('2010-03-03','c',3,3);
COMMIT;
START TRANSACTION;
DELETE FROM `test`.`t1` WHERE `a`='2010-01-01';
DELETE FROM `test`.`t1` WHERE `a`='2010-02-02';
UPDATE `test`.`t1` SET `a`='2010-01-01',`b`='b',`d`=4 WHERE `a`='2010-03-03';
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `a` DOUBLE NOT NULL,   `b` VARCHAR(1) COLLATE utf8_general_ci DEFAULT NULL,   `c` INT DEFAULT NULL,   `d` INT DEFAULT NULL,   PRIMARY KEY (`a`),   UNIQUE KEY `b` (`b`),   UNIQUE KEY `c` (`c`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (1.1,'a',1,1);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (22.22,'b',2,2);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (333.333,'c',3,3);
COMMIT;
START TRANSACTION;
DELETE FROM `test`.`t1` WHERE `a`=1.1;
DELETE FROM `test`.`t1` WHERE `a`=22.22;
UPDATE `test`.`t1` SET `a`=1.1,`b`='b',`d`=4 WHERE `a`=333.333;
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `a` DOUBLE NOT NULL,   `b` VARCHAR(1) COLLATE utf8_general_ci DEFAULT NULL,   `c` INT DEFAULT NULL,   `d` INT DEFAULT NULL,   PRIMARY KEY (`a`),   UNIQUE KEY `b` (`b`),   UNIQUE KEY `c` (`c`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (1.1,'a',1,1);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (22.22,'b',2,2);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES (333.333,'c',3,3);
COMMIT;
START TRANSACTION;
DELETE FROM `test`.`t1` WHERE `a`=1.1;
DELETE FROM `test`.`t1` WHERE `a`=22.22;
UPDATE `test`.`t1` SET `a`=1.1,`b`='b',`d`=4 WHERE `a`=333.333;
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;
SET AUTOCOMMIT=0;
CREATE TABLE `test`.`t1` (   `a` ENUM('a','bb','ccc') NOT NULL,   `b` VARCHAR(1) COLLATE utf8_general_ci DEFAULT NULL,   `c` INT DEFAULT NULL,   `d` INT DEFAULT NULL,   PRIMARY KEY (`a`),   UNIQUE KEY `b` (`b`),   UNIQUE KEY `c` (`c`) ) ENGINE=InnoDB COLLATE = utf8_general_ci;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('a','a',1,1);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('bb','b',2,2);
INSERT INTO `test`.`t1` (`a`,`b`,`c`,`d`) VALUES ('ccc','c',3,3);
COMMIT;
START TRANSACTION;
DELETE FROM `test`.`t1` WHERE `a`='a';
DELETE FROM `test`.`t1` WHERE `a`='bb';
UPDATE `test`.`t1` SET `a`='a',`b`='b',`d`=4 WHERE `a`='ccc';
COMMIT;
SET AUTOCOMMIT=0;
DROP TABLE `test`.`t1`;
COMMIT;
SET GLOBAL transaction_log_truncate_debug= true;
