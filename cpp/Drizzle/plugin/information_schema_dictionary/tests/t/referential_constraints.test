#  This is going to take some effort to get all of this right :(
#

CREATE SCHEMA test_constaints;
USE test_constaints;

CREATE TABLE t1(a1 INT NOT NULL,
                a2 INT NOT NULL,
                PRIMARY KEY(a1, a2));

CREATE TABLE t2(b1 INT,
                b2 INT,
                CONSTRAINT A1 FOREIGN KEY (b1, b2) REFERENCES t1(a1, a2) ON UPDATE CASCADE ON DELETE NO ACTION);

SELECT CONSTRAINT_NAME, UNIQUE_CONSTRAINT_SCHEMA, UNIQUE_CONSTRAINT_NAME, MATCH_OPTION, UPDATE_RULE, DELETE_RULE
  FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS 
  WHERE CONSTRAINT_SCHEMA = 'test_constaints';

SELECT CONSTRAINT_NAME, CHECK_CLAUSE FROM INFORMATION_SCHEMA.CHECK_CONSTRAINTS
  WHERE CONSTRAINT_SCHEMA = 'test_constaints';

SELECT TABLE_SCHEMA, TABLE_NAME, COLUMN_NAME, CONSTRAINT_CATALOG, CONSTRAINT_SCHEMA, CONSTRAINT_NAME
  FROM INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE
  WHERE CONSTRAINT_SCHEMA = 'test_constaints';

SELECT TABLE_NAME,CONSTRAINT_NAME
  FROM INFORMATION_SCHEMA.CONSTRAINT_TABLE_USAGE
  WHERE CONSTRAINT_SCHEMA = 'test_constaints';

DROP TABLE t2;
DROP TABLE t1;


DROP SCHEMA test_constaints;
#CREATE TABLE t1(a1 INT NOT NULL,
#                a2 INT NOT NULL,
#                PRIMARY KEY(a1, a2));
#
#CREATE TABLE t2(b1 INT,
#                b2 INT,
#                UNIQUE (b1, b2),
#                CONSTRAINT A1 FOREIGN KEY (b1, b2) REFERENCES t1(a1, a2) ON UPDATE CASCADE ON DELETE NO ACTION);
#
#CREATE TABLE t3(b1 INT,
#                b2 INT,
#                UNIQUE t3_indx (b1, b2),
#                CONSTRAINT A2 FOREIGN KEY (b1, b2) REFERENCES t2(b1, b2) ON UPDATE SET NULL ON DELETE RESTRICT);
#
#CREATE TABLE t4(b1 INT,
#                b2 INT,
#                UNIQUE KEY t4_ukey (b1, b2),
#                CONSTRAINT A3 FOREIGN KEY (b1, b2) REFERENCES t3(b1, b2) ON UPDATE NO ACTION ON DELETE SET NULL);
#
#CREATE TABLE t5(b1 INT, b2 INT, 
#                UNIQUE (b1, b2),
#                CONSTRAINT A4 FOREIGN KEY (b1, b2) REFERENCES t4(b1, b2) ON UPDATE RESTRICT ON DELETE CASCADE);
#
#SHOW CREATE TABLE t1;
#SHOW CREATE TABLE t2;
#SHOW CREATE TABLE t3;
#SHOW CREATE TABLE t4;
#SHOW CREATE TABLE t5;
#
#SELECT CONSTRAINT_SCHEMA, CONSTRAINT_NAME, UNIQUE_CONSTRAINT_SCHEMA, UNIQUE_CONSTRAINT_NAME, MATCH_OPTION, UPDATE_RULE, DELETE_RULE
#FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS;
#
#
#DROP TABLE t5;
#DROP TABLE t4;
#DROP TABLE t3;
#DROP TABLE t2;
#DROP TABLE t1;
#
## Taken from a Postgres Example
#CREATE TABLE products (
#    product_no integer PRIMARY KEY,
#    name text,
#    price integer
#);
#
#CREATE TABLE orders (
#    order_id integer PRIMARY KEY,
#    shipping_address text
#);
#
#CREATE TABLE order_items (
#    product_no integer REFERENCES products ON DELETE RESTRICT,
#    order_id integer REFERENCES orders ON DELETE CASCADE,
#    quantity integer,
#    PRIMARY KEY (product_no, order_id)
#);
#
#SELECT * FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS;
#
#SHOW CREATE TABLE producsts;
#SHOW CREATE TABLE orders;
#SHOW CREATE TABLE order_items;
#
#DROP TABLE order_items;
#DROP TABLE orders;
#DROP TABLE products;
#
