DROP TABLE IF EXISTS t1, t2;
#
# Bug#31663 FIELDS TERMINATED BY special character
#
CREATE TABLE t1 (i1 int, i2 int, c1 VARCHAR(256), c2 VARCHAR(256));
INSERT INTO t1 VALUES (101, 202, '-r-', '=raker=');
# FIELDS TERMINATED BY 'raker', error:
SELECT * INTO OUTFILE 'DRIZZLETEST_VARDIR/tmp/bug31663.txt' FIELDS TERMINATED BY 'raker' FROM t1;
ERROR HY000: First character of the FIELDS TERMINATED string is ambiguous; please use non-optional and non-empty FIELDS ENCLOSED BY
# Only numeric fields, FIELDS TERMINATED BY 'r', no warnings:
SELECT i1, i2 INTO OUTFILE 'DRIZZLETEST_VARDIR/tmp/bug31663.txt' FIELDS TERMINATED BY 'r' FROM t1;
SELECT LOAD_FILE('DRIZZLETEST_VARDIR/tmp/bug31663.txt');
LOAD_FILE('DRIZZLETEST_VARDIR/tmp/bug31663.txt')
101r202

CREATE TABLE t2 SELECT i1, i2 FROM t1;
LOAD DATA INFILE 'DRIZZLETEST_VARDIR/tmp/bug31663.txt' INTO TABLE t2 FIELDS TERMINATED BY 'r';
SELECT i1, i2 FROM t2;
i1	i2
101	202
101	202
DROP TABLE t2;
# FIELDS TERMINATED BY '0', warning:
SELECT * INTO OUTFILE 'DRIZZLETEST_VARDIR/tmp/bug31663.txt' FIELDS TERMINATED BY '0' FROM t1;
ERROR HY000: First character of the FIELDS TERMINATED string is ambiguous; please use non-optional and non-empty FIELDS ENCLOSED BY
# FIELDS OPTIONALLY ENCLOSED BY '"' TERMINATED BY '0', warning:
SELECT * INTO OUTFILE 'DRIZZLETEST_VARDIR/tmp/bug31663.txt' FIELDS OPTIONALLY ENCLOSED BY '"' TERMINATED BY '0' FROM t1;
ERROR HY000: First character of the FIELDS TERMINATED string is ambiguous; please use non-optional and non-empty FIELDS ENCLOSED BY
CREATE TABLE t2 SELECT * FROM t1;
LOAD DATA INFILE 'DRIZZLETEST_VARDIR/tmp/bug31663.txt' INTO TABLE t2 FIELDS OPTIONALLY ENCLOSED BY '"' TERMINATED BY '0';
ERROR HY000: Can't find file: 'DRIZZLETEST_VARDIR/tmp/bug31663.txt' (errno: 2)
DROP TABLE t2;
# Only string fields, FIELDS OPTIONALLY ENCLOSED BY '"' TERMINATED BY '0', no warnings:
SELECT c1, c2 INTO OUTFILE 'DRIZZLETEST_VARDIR/tmp/bug31663.txt' FIELDS OPTIONALLY ENCLOSED BY '"' TERMINATED BY '0' FROM t1;
SELECT LOAD_FILE('DRIZZLETEST_VARDIR/tmp/bug31663.txt');
LOAD_FILE('DRIZZLETEST_VARDIR/tmp/bug31663.txt')
"-r-"0"=raker="

CREATE TABLE t2 SELECT c1, c2 FROM t1;
LOAD DATA INFILE 'DRIZZLETEST_VARDIR/tmp/bug31663.txt' INTO TABLE t2 FIELDS OPTIONALLY ENCLOSED BY '"' TERMINATED BY '0';
SELECT c1, c2 FROM t2;
c1	c2
-r-	=raker=
-r-	=raker=
DROP TABLE t2;
DROP TABLE t1;
#
# Bug#32533: SELECT INTO OUTFILE never escapes multibyte character
#
# End of 5.0 tests.
