(function(A){A.fn.alphanumeric=function(B){B=A.extend({ichars:"_!@#$%^&*()+=[]\\';,/{}|\":<>?~`.- ",nchars:"",allow:""},B);return this.each(function(){if(B.nocaps){B.nchars+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"}if(B.allcaps){B.nchars+="abcdefghijklmnopqrstuvwxyz"}s=B.allow.split("");for(i=0;i<s.length;i++){if(B.ichars.indexOf(s[i])!=-1){s[i]="\\"+s[i]}}B.allow=s.join("|");var D=new RegExp(B.allow,"gi");var C=B.ichars+B.nchars;C=C.replace(D,"");A(this).keypress(function(E){if(!E.charCode){k=String.fromCharCode(E.which)}else{k=String.fromCharCode(E.charCode)}if(C.indexOf(k)!=-1){E.preventDefault()}if(E.ctrlKey&&k=="v"){E.preventDefault()}});A(this).bind("contextmenu",function(){return false})})};A.fn.numeric=function(C){var B="abcdefghijklmnopqrstuvwxyz";B+=B.toUpperCase();C=A.extend({nchars:B},C);return this.each(function(){A(this).alphanumeric(C)})};A.fn.alpha=function(C){var B="1234567890";C=A.extend({nchars:B},C);return this.each(function(){A(this).alphanumeric(C)})}})(jQuery);var main=function(){var D=false;return{init:function(){$(document).ready(function(){if(main.getTasks()!=null){main.updateTasks()}C();B();A();$("input").alphanumeric({allow:" .,?!-'@:;[]{}"});if($.browser.msie){$("ul,form,footer").css({visibility:"visible",opacity:1});$("label").css({"font-size":"30px"});$(".btn").css({left:"405px"});$("#task").css({position:"relative",top:"17px"})}})},getTasks:function(){if(localStorage.tasks!=null&&localStorage.tasks!=""){return localStorage.tasks.split(",")}else{return null}},setTasks:function(E){if(localStorage.tasks!=null&&localStorage.tasks!=""){var F=localStorage.tasks.split(",");F.push(escape(E));localStorage.removeItem("tasks");localStorage.setItem("tasks",F)}else{localStorage.setItem("tasks",escape(E))}main.updateTasks()},removeTask:function(E){var G=main.getTasks(),F=escape(E);$(G).each(function(H){if(F==G[H]){G.splice(H,1)}});localStorage.removeItem("tasks");localStorage.setItem("tasks",G);main.updateTasks()},updateTasks:function(){$("ul").empty();var F=main.getTasks(),E;$(F).each(function(G){E="";E+="<li>";E+="<h2>"+(G+1)+"</h2> ";E+='<a href="#remove" alt="Finished?" title="Finished?" class="finished">X</a> ';E+="<p>"+unescape(F[G])+"</p>";E+="</li>";E=$(E);$("ul").append(E)});$(".finished").unbind("click").bind("click",function(){if(confirm("Confirm Task Completed?")){var G=$(this).siblings("p").text();$(this).parent().fadeOut("fast",function(){main.removeTask(G)})}return false})}};function C(){var J=document.getElementsByTagName("canvas")[0],F=null,K=null,E=document.getElementsByTagName("body")[0],H=255,I=300,G=0;if(J.getContext("2d")){F=J.getContext("2d");F.clearRect(0,0,100,100);F.save();K=F.createRadialGradient(0,0,0,0,0,600);K.addColorStop(0,"#000");K.addColorStop(1,"rgb("+H+", "+H+", "+H+")");F.fillStyle=K;F.fillRect(0,0,100,100);F.save();K=F.createRadialGradient(I,0,0,I,0,300);K.addColorStop(0,"#e99d56");K.addColorStop(1,"#c93620");F.fillStyle=K;F.fillRect(0,0,600,600)}}function B(){$("input").each(function(){var F=$(this).attr("id"),E=$("label[for="+F+"]");if($(this).val()!=""){E.hide()}$(this).focus(function(){E.addClass("focus")}).blur(function(){if($(this).val()==""){E.removeClass("focus");E.show()}}).bind("keydown",function(G){if(G.keyCode>=48){E.hide()}}).bind("keyup",function(G){if($(this).val()==""){E.show()}})})}function A(){$("form").submit(function(){_t=$("#task").val();if(_t!=""&&_t!=null){main.setTasks(_t);$("#task").val("");$("input").trigger("blur")}return false})}}();