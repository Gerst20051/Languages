<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Update, Delete and comment Applicatio Demo</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
  
 
 <script type="text/javascript">
 function text_to_link(text) 
{
var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
return text.replace(exp,"<a href='$1' target='_blank'>$1</a>"); 
}
$(document).ready(function() 
{


$(".comment_button").click(function() {
var timestamp=new Date().getTime();
var element = $(this);
   
    var boxvall = $("#content").val();
	var boxval=text_to_link(boxvall);
	
    var dataString = 'content='+ boxval;
	
	if(boxval=='')
	{
	alert("Please Enter Some Text");
	
	}
	else
	{
	$("#flash").show();
	$("#flash").fadeIn(400).html('<span class="loading">Loading Update...</span>');

		
 
 
var html='<div class="bar'+timestamp+'" id="box"><div align="left" class="post_box"><span class="delete_button"><a href="#" id="'+timestamp+'" class="delete_update">X</a></span><div style="padding:10px;">'+boxval+' </div><span class="feed_link"><a href="#" class="comment" id="'+timestamp+'">comment</a></span></div><div id="expand_box"><div id="expand_url"></div></div><div id="fullbox" class="fullbox'+timestamp+'"><div id="commentload'+timestamp+'"></div><div class="comment_box" id="c'+timestamp+'"><form method="post" action="" name="'+timestamp+'"><textarea class="text_area" name="comment_value" id="textarea'+timestamp+'"></textarea><br /><input type="submit" value=" Comment " class="comment_submit" id="'+timestamp+'"/></form></div></div></div>';
  $("div#update").prepend(html);
  $("div#update div:first").slideDown("slow");
   $('#content').val('');
   $('#content').focus();
  $("#flash").hide();
 
	
	
 
}
return false;
	});


// delete undate

$('.delete_update').live("click",function() 
{
var ID = $(this).attr("id");

if(confirm("Sure you want to delete this update? There is NO undo!"))
{
$(".bar"+ID).slideUp();
}
return false;

});

//comment slide
$('.comment').live("click",function() 
{

var ID = $(this).attr("id");
$(".fullbox"+ID).show();
$("#c"+ID).slideToggle(300);

return false;
});


//commment Submint

$('.comment_submit').live("click",function() 
{
var timestamp=new Date().getTime();
var ID = $(this).attr("id");

var comment_contentt = $("#textarea"+ID).val();
var comment_content=text_to_link(comment_contentt);
	
    var dataString = 'comment_content='+ comment_content;
	
	if(comment_content=='')
	{
	alert("Please Enter Comment Text");
	
	}
	else
	{
	
   var html='<div class="comment_load" id="comment'+timestamp+'">'+comment_content+'<span class="cdelete_button"><a href="#" id="'+timestamp+'" class="cdelete_update">X</a></span></div>';
   	
  
 
  $("#commentload"+ID).append(html);
    $("#textarea"+ID).val('');
   
   $("#textarea"+ID).focus();
  
  
	
	
	}

return false;
});

//comment delete

$('.cdelete_update').live("click",function() 
{
var ID = $(this).attr("id");


if(confirm("Sure you want to delete this Comment? There is NO undo!"))
{
$("#comment"+ID).slideUp();
}

});




return false;

});


</script>


<style type="text/css">
body
{
font-family:Arial, Helvetica, sans-serif;
font-size:13px;
}
.update_box
{
background-color:#D3E7F5; border-bottom:#ffffff solid 1px; padding-top:3px
}
a
	{
	text-decoration:none;
	color:#d02b55;
	}
	a:hover
	{
	text-decoration:underline;
	color:#d02b55;
	}
	*{margin:0;padding:0;}
	#box
	{
	position:relative;
	}
	
	ol.timeline
	{list-style:none;font-size:1.2em;}ol.timeline li{ display:none;position:relative; }ol.timeline li:first-child{border-top:1px dashed #006699;}
	.delete_button
	{
	float:right; margin-right:10px; width:20px; height:20px
	}
	
	.cdelete_button
	{
	float:right; margin-right:10px; width:20px; height:20px
	}
	
	.feed_link
	{
	font-style:inherit; font-family:Georgia; font-size:13px;padding:10px; float:left; width:350px
	}
	.comment
	{
	color:#0000CC; text-decoration:underline
	}
	.delete_update
	{
	font-weight:bold;
	
	}
	.cdelete_update
	{
	font-weight:bold;
	
	}
	.post_box
	{
	height:55px;border-bottom:1px dashed #333333;background-color:#f2f2f2;width:499px;padding:.7em 0 .6em 0;line-height:1.1em;
	
	}
	#fullbox
	{
	margin-top:6px;margin-bottom:6px; display:none;
	}
	.comment_box
	{
	    display:none;margin-left:90px; padding:10px; background-color:#d3e7f5; width:300px;  height:50px;
	
	}
	.comment_load
	{
	  margin-left:90px; padding:10px; background-color:#d3e7f5; width:300px; height:30px; font-size:12px; border-bottom:solid 1px #FFFFFF;
	
	}
	.text_area
	{
	width:290px;
	font-size:12px;
	height:30px;
	}
	#expand_box
	{
	margin-left:90px;
	margin-top:5px;
	margin-bottom:5px;
	}
	embed
	{
		width:200px;
		height:150px;

	}
img
{
width:300px;

}
	
</style>
</head>

<body>
<h1>Multiple actions</h1>

<div align="center">
<table cellpadding="0" cellspacing="0" width="500px">
<tr>
<td>


<div align="left">
<form  method="post" name="form" action="">
<table cellpadding="0" cellspacing="0" width="500px">

<tr><td align="left"><div align="left">
<h4> <span style="background-color:#ffffcc; padding:5px"> Update, Delete and Comment</span></h4><br />
<h3>What's up?</h3></div></td></tr>
<tr>
<td style="padding:4px; padding-left:10px;" class="update_box">
<textarea cols="30" rows="2" style="width:480px;font-size:14px; font-weight:bold" name="content" id="content" maxlength="145" ></textarea><br />
<input type="submit"  value="Update"  id="v" name="submit" class="comment_button"/>
</td>

</tr>

</table>
</form>

</div>
<div style="height:7px"></div>
<div id="flash" align="left"  ></div>



<div  id="update" class="timeline">



</div>

</td>
</tr>
</table>






</div>


 
</body>
</html>
