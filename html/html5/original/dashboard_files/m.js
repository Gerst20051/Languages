(function(a){a.bitly_defaults={login:"10kweb",apiKey:"R_f945c725dbb1328d63db8cdbc00eaedb"};a.fn.bitly_shorten=function(c,e){var d="http://api.bit.ly/v3/shorten?&longUrl="+encodeURIComponent(c)+"&login="+a.bitly_defaults.login+"&apiKey="+a.bitly_defaults.apiKey+"&format=json&callback=?",b=false;a.getJSON(d,function(g,f){if(g.status_code===200){b=g.data.url}e(b)})};a.fn.bitly_title=function(c,e){var d="http://api.bit.ly/v3/info?&login="+a.bitly_defaults.login+"&apiKey="+a.bitly_defaults.apiKey+"&shortUrl="+encodeURIComponent(c)+"&format=json&callback=?",b=false;a.getJSON(d,function(g){if(g.status_code===200){var f=g.data.info[0].title;b=f.length>28?f.substring(0,28)+" &hellip;":f}e(b)})}})(jQuery);$(function(){var c='<article class="note component"><header><h2 contenteditable="true">None</h2></header><section class="text" contenteditable="true"><p><span class="hellip" contenteditable="false">&hellip;</span>&nbsp;</p></section></article>',e='<article class="list component" tabindex="3"><dl><dt contenteditable="true">None</dt><dd ><p contenteditable="true"><span class="hellip" contenteditable="false">&hellip;</span>&nbsp;</p>            <a class="delete-bullet" href="#delete-this">X</a></dd><dd ><p contenteditable="true"><span class="hellip" contenteditable="false">&hellip;</span>&nbsp;</p>            <a class="delete-bullet" href="#delete-this">X</a></dd></dl><a class="add-bullet component" href="#add-bullet" title="add a bullet to the list">+</a></article>',d='<article class="link component"> <span class="link-attribute link-title">&hellip;</span><a href="#" class="link-attribute link-url">http://twitter.com</a></article>',a='<dd ><p contenteditable="true"><span class="hellip" contenteditable="false">&hellip;</span>&nbsp;</p><a class="delete-bullet" href="#delete-this">X</a></dd>';if(localStorage.getItem("10kDashboard")){$("#dashboard").html(localStorage.getItem("10kDashboard"))}function b(){localStorage.setItem("10kDashboard",$("#dashboard").html())}function f(i,k,g){i.preventDefault();var h=$(k).css("display","none"),j=$.trim($("#element-title").val());if(j!=""){h.find("h2, dt").text(j)}if(g===undefined){h.prependTo("#dashboard").fadeIn(900,function(){b()}).find("[contenteditable=true]").focus()}else{h.appendTo(g).fadeIn(900,function(){b()}).focus()}}$("#add-entry-form").submit(function(g){g.preventDefault});$("#add-note").click(function(g){f(g,c)});$("#add-list").click(function(g){f(g,e)});$("#add-link").click(function(h){var g=$.trim($("#element-title").val());$.fn.bitly_shorten(g,function(i){var j=$(d);if(i!==false){j.find(".link-url").text(i).attr("href",i);$.fn.bitly_title(i,function(k){j.find(".link-title").html(k);f(h,$(j))})}else{alert('"'+g+'"    is not a valid url!')}})});$("#dashboard").delegate(".add-bullet","click",function(g){f(g,a,$(this).parent().find("dl"))});$("#dashboard").delegate(".delete-bullet","click",function(g){g.preventDefault();$(this).parent().fadeOut(500,function(){$(this).remove();b()})});$("#dashboard").delegate("article","click, focus",function(g){g.preventDefault();$(".selected-element").removeClass("selected-element");$(this).addClass("selected-element")});$("#delete-element").click(function(g){g.preventDefault();$(".selected-element").fadeOut(500,function(){$(this).remove();b()})});$("#dashboard").delegate("[contenteditable]","keyup",function(g){$(this).click();b()});$("#dashboard").delegate("article","click",function(g){$(".focus").removeClass("focus");$(this).addClass("focus").focus()})});
