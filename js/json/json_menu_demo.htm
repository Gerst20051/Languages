<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" dir="ltr" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <script src="ajax.js" type="text/javascript">
  </script>


<script type="text/javascript">

function loadJSON(fname) 
{
	var xhr=createXHR();
	xhr.open("GET", fname,true);
	xhr.onreadystatechange=function() 
	{
		if (xhr.readyState == 4) 
		{
			if (xhr.status != 404) 
			{
				document.getElementById("zone").innerHTML = "found";
				var data=eval("(" + xhr.responseText + ")");
				document.getElementById("zone").innerHTML = "Menu " + data.menu + "<br>";
				for(i = 0; i < 3; i++)
				{
					document.getElementById("zone").innerHTML += "&nbsp;" + data.commands[i].title + ': ' + data.commands[i].action + "<br>";
				}
			} 
			else 
			{
				document.getElementById("zone").innerHTML = fname + " not found";
			}
		}
	}
	xhr.send(null);
}



</script>
	<title>Ajax Get JSON Demo</title></head>

	
<body bgcolor="#FFFFFF">
<p><font size="+3">Ajax JSON Demo - Get a Menu</font></p>
<hr>
<FORM name="ajax" method="POST" action="">
			
  <p>
    <INPUT type="BUTTON" value=" Click to load the JSON menu file "  ONCLICK="loadJSON('ajax-json-menu.json')">
  </p>

</FORM>
	


<div id="zone"></div>

<p><br>
  <a href="ajax-json-menu.json">View the JSON file</a> </p>
<br>
<hr>
(c) 2006 - <a href="http://www.xul.fr" target="_parent">Xul.fr</a> 
</body>
</html>

